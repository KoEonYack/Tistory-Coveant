# [Node.js] ì—ëŸ¬ì²˜ë¦¬ (Page Not Found)


<br />
<img src="https://github.com/KoEonYack/PracticeCoding/blob/master/Article/Nodejs/%EC%97%90%EB%9F%AC%EC%B2%98%EB%A6%AC/img/cover.png?raw=true" align="center" style="display: block; margin: 0px auto; display: block; height: auto; border:1px solid #eaeaea; padding: 0px;" width="" >
<br />
<center>Source. freepik.com</center>

<br />
<br />


# ê¸°ë³¸ ì½”ë“œ

<br />

``` console
npm init
```
Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì´ˆê¸°í™”í•˜ê³  package.json íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. 


<br />


``` console
ğŸ“‚Root
|
â”œâ”€â”€ ğŸ“‚ node_modules   
â”œâ”€â”€ ğŸ“‚ controllers
|   â””â”€â”€ ğŸ“„ errorControllers.js  <------ TODO!
|â”€â”€ ğŸ“‚ public
|   â””â”€â”€ ğŸ“„ 404.html             <------ TODO!
â”œâ”€â”€ ğŸ“„ index.js                 <------ TODO!
|   ğŸ“„ package.json
|   ğŸ“„ package-lock.json
```
ì‘ì—…í•  ë””ë ‰í† ë¦¬ êµ¬ì¡°ëŠ” ìœ„ì™€ ê°™ìŠµë‹ˆë‹¤. <a href="https://github.com/KoEonYack/blog-nodejs/tree/errorhandle"> ì™„ì„± ì½”ë“œ Github </a> ì—ì„œ í™•ì¸í•˜ì„¸ìš”.


<br />
<br />


``` javascript
const express = require('express');
const app = express();
const PORT = 5003;

app.get('/', (req, res) => 
    res.send("Hello World!")
)

app.listen(PORT, () => {
    console.log(`Server is running on port: ${PORT}`);
})
```
<center> index.js ê¸°ë³¸ ì½”ë“œ </center>
<br />



index.js ê¸°ë³¸ ì½”ë“œëŠ” ìœ„ì™€ ê°™ìŠµë‹ˆë‹¤. 5003ë²ˆ í¬íŠ¸ë¥¼ ì´ìš©í•  ê²ƒì´ë©° ì›¹ì˜ rootì—ì„œëŠ” Hello Worldë¥¼ ë³´ì—¬ì¤„ ê²ƒì…ë‹ˆë‹¤. 


<br />


``` console 
nodemon index.js
node index.js
```

nodemon í˜¹ì€ node ëª…ë ¹ì–´ë¡œ ì„œë²„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.


<br />
<img src="https://github.com/KoEonYack/PracticeCoding/blob/master/Article/Nodejs/%EC%97%90%EB%9F%AC%EC%B2%98%EB%A6%AC/img/main.PNG?raw=true" align="center" style="display: block; margin: 0px auto; display: block; height: auto; border:1px solid #eaeaea; padding: 0px;" width="" >
<br />

http://localhost:5003/ì„ í†µí•´ ì ‘ì†í•˜ë©´ Hello Worldê°€ ì •ìƒì ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.



<br />
<img src="https://github.com/KoEonYack/PracticeCoding/blob/master/Article/Nodejs/%EC%97%90%EB%9F%AC%EC%B2%98%EB%A6%AC/img/not_found_url.PNG?raw=true" align="center" style="display: block; margin: 0px auto; display: block; height: auto; border:1px solid #eaeaea; padding: 0px;" width="" >
<br />

http://localhost:5003/123ê³¼ ê°™ì´ ë‹¤ë¥¸ PATHë¡œ ì ‘ì†í•œë‹¤ê³  í•˜ë©´ ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ ë©”ì„¸ì§€ë¥¼ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ´ ê²½ìš°ì— Page Not Found ì—ëŸ¬ì²˜ë¦¬ë¥¼ í•  ê²ƒì…ë‹ˆë‹¤.



<br />
<br />


# ì—ëŸ¬ ì²˜ë¦¬ ì½”ë“œ ì‘ì„±

<br />

HTTPëŠ” ë‹¤ì–‘í•œ ìƒíƒœì½”ë“œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ìƒíƒœ ì½”ë“œë¥¼ ëª¨ë¥¸ë‹¤ë©´? [Wiki ìƒíƒœì½”ë“œ](https://ko.wikipedia.org/wiki/HTTP_%EC%83%81%ED%83%9C_%EC%BD%94%EB%93%9C) ìƒíƒœì½”ë“œë¥¼ ìˆ«ìë¥¼ ì§ì ‘ ë„£ì–´ë„ ë˜ê² ì§€ë§Œ ì½”ë“œì˜ ê°€ë…ì„±ì„ ìœ„í•˜ì—¬ ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ê²ƒì…ë‹ˆë‹¤. 


<br />

``` console
npm install http-status-codes --save
```

Node.js íŒ¨í‚¤ì§€ì˜ ë£¨íŠ¸ì— `controllers` ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•œ ë‹¤ìŒ `errorControllers.js`ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•©ë‹ˆë‹¤. 

<br />


``` javascript
const httpStatus = require('http-status-codes');

exports.pageNotFoundError = (req, res) => {
    let errorCode = httpStatus.NOT_FOUND;
    res.status(errorCode);
    res.send(`${errorCode} | The page does not exist! `);
}

exports.respondInternalError = (errors, req, res, next) => {
    let errorCode = httpStatus.INTERNAL_SERVER_ERROR;
    console.log(`Error occured: ${errors.stack}`)
    res.status(errorCode);
    res.send(`${errorCode} | Sorry, our application is experiencing a problem!`);
};
```
<center> controllers ë””ë ‰í† ë¦¬ì˜ errorControllers.js </center>

<br />

404 ì—ëŸ¬ëŠ” `pageNotFoundError`ê°€ ì²˜ë¦¬í•©ë‹ˆë‹¤. 500 ì—ëŸ¬ëŠ” `respondInternalError`ê°€ ì²˜ë¦¬í•©ë‹ˆë‹¤.

<br />


``` javascript
const express = require('express');
const app = express();
const PORT = 5003;
const errorController = require("./controllers/errorControllers");

app.get('/', (req, res) => 
    res.send("Hello World!")
)

app.use(errorController.pageNotFoundError);
app.use(errorController.respondInternalError);


app.listen(PORT, () => {
    console.log(`Server is running on port: ${PORT}`);
})
```
<center> index.js ìˆ˜ì •</center>

<br />

`app.use(errorController.pageNotFoundError);` ì™€ `app.use(errorController.respondInternalError);` ë¯¸ë“¤ì›¨ì–´ë¥¼ index.jsì— ì¶”ê°€í•´ì¤ë‹ˆë‹¤.


<br />
<img src="https://github.com/KoEonYack/PracticeCoding/blob/master/Article/Nodejs/%EC%97%90%EB%9F%AC%EC%B2%98%EB%A6%AC/img/not_found_1.PNG?raw=true" align="center" style="display: block; margin: 0px auto; display: block; height: auto; border:1px solid #eaeaea; padding: 0px;" width="" >
<br />

http://localhost:5003/123ì„ ì…ë ¥í•˜ë©´ Page Not Foundë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 500 ì—ëŸ¬ ì²˜ë¦¬ë„ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— 500 ì—ëŸ¬ê°€ ë‚œë‹¤ë©´ ì´ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ë³´ì—¬ì§ˆ ê²ƒì…ë‹ˆë‹¤.

<br />
<br />

# 404.htmlì„ ë§Œë“¤ì–´ë³´ì

<br />

ìœ„ì—ì„œ ê°„ë‹¨í•˜ê²Œ sendë¥¼ ì´ìš©í•˜ì—¬ 404 ì²˜ë¦¬ë¥¼ í•˜ì˜€ìŠµë‹ˆë‹¤. 404ë¥¼ ìœ„í•œ í…œí”Œë¦¿ì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.


``` javascript
exports.pageNotFoundError = (req, res) => {
    let errorCode = httpStatus.NOT_FOUND;
    res.status(errorCode);
    res.sendFile(`./public/${errorCode}.html`,{
        root: "./"
    });
};
```

errorControllers.jsì˜ `pageNotFoundError`ë¥¼ ìœ„ì™€ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤. `res.sendFile`ì€ ì—ëŸ¬ í˜ì´ì§€ì˜ ê²½ë¡œë¥¼ íŠ¹ì •í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤. 


``` html
<h1>404</h1>
```
<center>404.html</center>


<br />
<img src="https://github.com/KoEonYack/PracticeCoding/blob/master/Article/Nodejs/%EC%97%90%EB%9F%AC%EC%B2%98%EB%A6%AC/img/not_found_2.PNG?raw=true" align="center" style="display: block; margin: 0px auto; display: block; height: auto; border:1px solid #eaeaea; padding: 0px;" width="" >
<br />

http://localhost:5003/123ë¡œ ì ‘ì†ì‹œ 404.htmlì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

public ë””ë ‰í† ë¦¬ì— 404.htmlì„ ìœ„ì™€ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. [í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ 404 ë¨¸ì“± ì´ë²¤íŠ¸](https://programmers.co.kr/competitions/142/vs-event) ë¥¼ ì§„í–‰í•œ ì ì´ ìˆìœ¼ë©° êµ¬ê¸€ ê²€ìƒ‰ì‹œ ë‹¤ì–‘í•œ 404 í…œí”Œë¦¿ì´ ë‚˜ì˜µë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ë“¤ì˜ 404ë¥¼ ì¬ì¹˜ìˆê²Œ ì˜ ë§Œë“¤ì–´ë³´ì„¸ìš”~

<br />
<br />
<br />



